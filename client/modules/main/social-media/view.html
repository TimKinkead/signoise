<!-- Social Media Table -->

<!-- Download Button -->
<div class="container">
    <button ng-click="download()"
            class="btn btn-success pull-right"
            style="margin-bottom: 5px;">
        Download
    </button>
</div>

<!-- Title -->
<h1 class="text-center">Social Media</h1>

<!-- Filter Buttons -->
<div class="container text-center">
    <div class="btn-group">
        <button ng-repeat="option in filterByOptions"
                ng-model="filterBy.type"
                class="btn" ng-class="{'btn-filter': option !== 'all'}"
                uib-btn-radio="option">
            {{option|capitalize}} <span class="badge" ng-if="summary[option]" ng-bind="summary[option]|roughNumber"></span>
        </button>
    </div>
</div>

<!-- Social Media Table (full) -->
<div class="container"
     style="margin-top: 15px;">
    <table class="table table-bordered table-hover">

        <thead>

            <!-- Full -->
            <th ng-repeat="field in fields"
                class="hidden-xs">
                {{field|capitalize}}
            </th>

            <!-- Mobile -->
            <th class="visible-xs">
                <span class="text-info">Text</span><br/>
                Social Seed (Platform)
            </th>

        </thead>

        <tbody>
            <tr ng-repeat="doc in media"
                ng-init="parentIndex = $index"
                ng-class="{'last-row': $last}"
                ng-click="read(doc)"
                style="cursor:pointer;">

                <!-- Full -->
                <td ng-repeat="field in fields" class="hidden-xs">
                    <div ng-if="['no', 'seed', 'ngrams', 'probability'].indexOf(field) < 0">
                        {{(dates.indexOf(field) > -1) ? (doc[field]|date:'shortDate') : doc[field]}}
                    </div>
                    <div ng-if="field === 'no'">
                        {{parentIndex+1}}
                    </div>
                    <div ng-if="field === 'date'" style="min-width: 50px;">
                        {{doc.date|date:'shortTime'}}
                    </div>
                    <div ng-if="field === 'seed'">
                        {{doc.socialseed.title}}
                    </div>
                    <div ng-if="field === 'ngrams'">
                        <i ng-if="doc.ngrams" class="glyphicon glyphicon-ok"></i>
                    </div>
                    <div ng-if="field === 'probability'">
                        {{doc.probability|percentage}}
                    </div>
                </td>

                <!-- Mobile -->
                <td class="visible-xs">
                    <span class="text-info">{{(doc.text && doc.text.length > 150) ? doc.text.slice(0, 150) : doc.text}}</span><br/>
                    {{doc.socialseed.title}} ({{doc.platform}})
                </td>

            </tr>
        </tbody>

    </table>
</div>