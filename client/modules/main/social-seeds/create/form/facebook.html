<!-- Create Facebook Social Seed -->

<div ng-show="status.processing" class="text-center">
    {{status.message ? status.message : '...please wait...'}}
</div>

<form ng-if="!status.processing" ng-submit="searchFacebook()">
    <label>search facebook</label>
    <div class="input-group">
        <input type="text" class="form-control" required
               ng-model="seed.query"
               placeholder="group or page"/>
        <span class="input-group-btn">
            <button class="btn btn-success" type="submit">
                <i class="glyphicon glyphicon-search"></i>
            </button>
        </span>
    </div>
</form>

<div class="alert alert-danger" role="alert" ng-show="status.errorMessage">
    {{status.errorMessage}}
</div>

<uib-tabset ng-if="facebookResults && !status.processing" style="margin: 10px;">
    <uib-tab data-ng-repeat="resultType in ['groups','pages']"
         heading="{{resultType|capitalize}}">

        <div data-ng-if="facebookResults[resultType] && !facebookResults[resultType].length"
             class="alert alert-warning" style="margin-top:10px;">
            Sorry, we did not find any {{resultType}}.
        </div>

        <p data-ng-if="facebookResults[resultType] && facebookResults[resultType].length"
           class="text-center" style="margin: 5px;">
            Click to select a {{resultType.slice(0, resultType.length-1)}}.
        </p>
        <button data-ng-repeat="result in facebookResults[resultType]"
                data-ng-click="selectFacebook(result)"
                class="btn btn-block btn-default"
                style="margin-bottom: 5px; padding: 4px 8px; overflow: hidden;">
            <div class="row text-left" style="margin: auto;">
                <h4 style="white-space: normal; margin: 2px 0 5px;">
                    {{result.name}}
                    <small class="text-muted">- {{result.privacy ? (result.privacy === 'OPEN' ? 'Public Group' : 'Closed Group') : result.category}}</small>
                </h4>
                <div class="col-xs-4" style="padding: 0; margin-bottom: 5px; overflow: hidden; max-height: 120px;">
                    <img data-ng-if="result.cover && result.cover.source" style="width: 100%;"
                         data-ng-src="{{result.cover.source}}" />
                    <div data-ng-if="!result.cover || !result.cover.source"
                         style="background-color: #eeeeee; width: 100%; min-height: 80px;">
                    </div>
                </div>
                <p class="col-xs-8" style="padding: 0 0 0 10px; white-space: normal; margin-bottom: 0;"
                   data-ng-if="result.about || result.description">
                    {{((result.about || result.description)|limitTo:200) + ((result.about || result.description).length > 200 ? '...' : '')}}
                </p>
            </div>
        </button>
    </uib-tab>
</uib-tabset>